<% include ./partials/Header.ejs %>
<div class="profile w-full min-h-screen bg-zinc-800 text-white pt-1">
  <form
    id="uploadform"
    hidden
    action="/fileupload"
    method="post"
    enctype="multipart/form-data"
  >
    <input type="file" name="image" />
  </form>
  <div class="profdets flex flex-col items-center mt-20">
    <div class="relative">
      <span
        id="uploadicon"
        class="w-38 h-38 absolute bottom-0 right-1 rounded-full flex items-center justify-center bg-zinc-200"
      >
        <lord-icon
          class="cursor-pointer"
          src="https://cdn.lordicon.com/oqaajvyl.json"
          trigger="in"
          delay="500"
          stroke="bold"
          state="in-dynamic"
          colors="primary:#000000,secondary:#000000"
          style="width: 20px; height: 20px"
        >
        </lord-icon>
      </span>
      <div class="w-20 h-20 bg-zinc-200 rounded-full">
        <img
          class="h-full w-full object-cover overflow-hidden rounded-full"
          src="/images/uploads/<%= user.profileImage%>"
        />
      </div>
    </div>
    <h1 class="text-3xl font-semibold mt-5"><%= user.nameuser %></h1>
    <h3 class="text-md">@<%= user.username %></h3>
    <a
      href="/edit"
      class="mt-5 px-7 py-1 bg-zinc-700 rounded-full text-xs font-semibold"
      >Edit</a
    >
    <a href="/add"
      class="px-10 py-2 mt-3 text-xs bg-red-600 capatelize text-white font-semibold rounded-md"
    >
      Create new post
    </a>
  </div>

  <div class="cards flex flex-wrap items-center gap-10 px-10 mt-10">
    <div class="card">

      <div class="w-52 h-40 bg-zinc-200 rounded-lg">
        <img
          class="h-full w-full object-cover overflow-hidden rounded-lg"
          src="/images/uploads/<%= user?.posts[0]?.image %>" alt="...loading"
        />
      </div>
      
      <a href="/show/posts"class="text-xl font-semibold mt-3">Your Uploaded Pins</a>
      <h5 class="text-sm font-medium opacity-60"><%= user.posts.length%></h5>
    </div>
  </div>
</div>
<script>
  document.querySelector("#uploadicon").addEventListener("click", function () {
    document.querySelector("#uploadform input").click();
  });

  document.querySelector("#uploadform input").addEventListener('change',function(){
    document.querySelector("#uploadform").submit();
  });
</script>
<% include ./partials/footer.ejs %>
